<!DOCTYPE html>
<html>
	<head>
		<title>Mapmyindia Maps</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	
                <script src="https://apis.mapmyindia.com/advancedmaps/v1/e07e5c2c75606e75c40d26b59bb29d48/map_load?v=1.5"></script>
                <style>
                    html, body, #map {	margin: 5px;	padding: 2px;width: 99%;height: 97%;}
                    
                </style>
	
	</head>
	<body>
    
            <div>
             <button onclick="loginclick()"> login</button>
             <script>
                   function loginclick()
             {
            window.location.href = "login.html";
             }
             </script>
           
              <select id="stationSelect"></select>
<button onclick="handleClick()">Submit</button>
              <script>
                document.addEventListener('DOMContentLoaded', () => {
                  fetch('http://localhost:5001/api/v1/policestationlist')
                    .then(response => response.json())
                    .then(data => {
                      const policeStations = data.policeStations;
                      const selectElement = document.getElementById('stationSelect');
                      
                      for (let i = 0; i < policeStations.length; i++) {
                        const station = policeStations[i];
                
                        const optionElement = document.createElement('option');
                        optionElement.value = station.name; 
                        optionElement.textContent = station.name; 
                    
                        selectElement.appendChild(optionElement);
                      }
                    })
                    .catch(error => {
                      console.error('Error:', error); 
                    });
                });
              
                function handleClick() {
                  const selectElement = document.getElementById('stationSelect');
                  const selectedOption = selectElement.value;
                   window.location=`http://127.0.0.1:5500/frontend/data.html?name=${selectedOption}`;
                  console.log('Selected option:', selectedOption);
                }
              </script>              
              
            </div>

            <div>

              <select id="crimeType"></select>
<button onclick="handleClick2()">Submit</button>
              <script>
                document.addEventListener('DOMContentLoaded', () => {
                  fetch('http://localhost:5001/api/v1/crimetype')
                    .then(response => response.json())
                    .then(data => {
                      console.log(data)
                      const crimeType = data.crimeType;
                      const selectElement = document.getElementById('crimeType');
                      
                      for (let i = 0; i < crimeType.length; i++) {
                        console.log(crimeType[i]);
                        const type = crimeType[i];
                
                        const optionElement = document.createElement('option');
                        optionElement.value = type; 
                        optionElement.textContent = type; 
                    
                        selectElement.appendChild(optionElement);
                      }
                    })
                    .catch(error => {
                      console.error('Error:', error); 
                    });
                });
              
                function handleClick2() {
                  const selectElement = document.getElementById('stationSelect');
                  const selectedOption = selectElement.value;
                   window.location=`http://127.0.0.1:5500/frontend/data.html?name=${selectedOption}`;
                  console.log('Selected option:', selectedOption);
                }
              </script>              
              
            </div>


            <div id="map"></div>
        <script>
          
            var map=new MapmyIndia.Map("map",{ center:[10.808907067095587,78.68501399552801], zoomControl: true, hybrid:true, search:true, location:true}); /*map initialized*/
        
      
  
        
        fetch('http://localhost:5001/api/v1/policestationlist')
  .then(response => response.json())
  .then(data => {
    const policeStations = data.policeStations;
    for (let i = 0; i < policeStations.length; i++) {
  const station = policeStations[i];
  console.log(station.name, station.lat, station.long);
  const marker= L.marker([station.lat,  station.long]).addTo(map);
  marker.bindPopup(`<a href="http://127.0.0.1:5500/frontend/data.html?name=${station.name}">${station.name}</a>`); 
}
  })
  .catch(error => {
    console.error('Error:', error); 
  });
         </script>
	</body>
</html>
