<!DOCTYPE html>
<html>
	<head>
		<title>Mapmyindia Maps</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
	  <link rel="stylesheet" href="map.css">
                <script src="https://apis.mapmyindia.com/advancedmaps/v1/e07e5c2c75606e75c40d26b59bb29d48/map_load?v=1.5"></script>
                <style>
                    html, body, #map {width: 650px;height: 500px;}
                    
                </style>
	   
	</head>
	<body>
    <div class="navigation">
      <div class="nav-bar">
          <i class='bx bx-menu sidebarOpen' ></i>
          <img src="image.png" alt="" width="75px" >
          <span class="logo navLogo"><a href="#">TRICHY CITY POLICE</a></span>
          <!-- <div><br><br></div> -->
          <div class="menu">
              <div class="logo-toggle">
                  <i class='bx bx-x siderbarClose'></i>
              </div>
              <ul class="nav-links">
                  <li><a href="#">Home</a></li>
                  <li><a href="#">Profile</a></li>
                  <li><a href="#">Contact</a></li>
              </ul>
          </div>
      </div>
    </div>
    <nav class="sidebar close">
      <div class="menu-bar">
          <div class="menu">
              <ul class="menu-links">
                  <li class="nav-link">
                    <label for="station" class="text nav-text">Station:</label>
                    <input type="text" id="filters" name="station" required>
                  </li>
                  <li class="nav-link">
                    <label for="crimeDate" class="text nav-text">Date of Crime:</label>
                    <input type="date" id="filters" name="crimeDate" required>
                  </li>
                  <li class="nav-link">
                    <label for="crimeTime" class="text nav-text">Time of Crime:</label>
                    <select id="filters" name="crimeTime" required>
                      <option value="">Select Time</option>
                      <option value="00">12:00 AM</option>
                      <option value="01">01:00 AM</option>
                      <option value="02">02:00 AM</option>
                      <option value="03">03:00 AM</option>
                      <option value="04">04:00 AM</option>
                      <option value="05">05:00 AM</option>
                      <option value="06">06:00 AM</option>
                      <option value="07">07:00 AM</option>
                      <option value="08">08:00 AM</option>
                      <option value="09">09:00 AM</option>
                      <option value="10">10:00 AM</option>
                      <option value="11">11:00 AM</option>
                      <option value="12">12:00 PM</option>
                      <option value="13">01:00 PM</option>
                      <option value="14">02:00 PM</option>
                      <option value="15">03:00 PM</option>
                      <option value="16">04:00 PM</option>
                      <option value="17">05:00 PM</option>
                      <option value="18">06:00 PM</option>
                      <option value="19">07:00 PM</option>
                      <option value="20">08:00 PM</option>
                      <option value="21">09:00 PM</option>
                      <option value="22">10:00 PM</option>
                      <option value="23">11:00 PM</option>
                    </select>
                  </li>
                  <li class="nav-link">
                    <label for="crimeLocation" class="text nav-text">Location of Crime:</label>
                    <input type="text" id="filters" name="crimeLocation" required>
                    </li>
                    <li class="nav-link">
                      <label for="crimeType" class="text nav-text">Type of Crime:</label>
        <select id="filters" name="crimeType" required>
          <option value="">Select Crime Type</option>
          <option value="ganja">Ganja</option>
          <option value="robbery">Robbery</option>
          <option value="kidnap">Kidnap</option>
          <option value="murder">Murder</option>
          <option value="sexualassault">Sexual Assault</option>
        </select>
                    </li>
              </ul>
          </div>
      </div>
  </nav>
  
            <div class="division">

              <select id="stationSelect"></select>

              <script>
                fetch('http://localhost:5000/api/v1/policestationlist')
                  .then(response => response.json())
                  .then(data => {
                    const policeStations = data.policeStations;
                    const selectElement = document.getElementById('stationSelect');
                    
                    for (let i = 0; i < policeStations.length; i++) {
                      const station = policeStations[i];
                      
      
                      const optionElement = document.createElement('option');
                      optionElement.value = station.name; 
                      optionElement.textContent = station.name; 
                  
                      selectElement.appendChild(optionElement);
                    }
                  })
                  .catch(error => {
                    console.error('Error:', error); 
                  });
              </script>
              
            </div>
           <div id="container">
            <div id="map"></div>
           </div>
           <div class="mainbox">
            <div class="box">
            <div class="mini">One</div>
            <div class="mini">Two</div>
            <div class="mini">Three</div>
            <div class="mini">Four</div>
            <div class="mini">Five</div>
            <div class="mini">Six</div>
            </div></div>
        <script>
            var map=new MapmyIndia.Map("map",{ center:[10.808907067095587,78.68501399552801], zoomControl: true, hybrid:true, search:true, location:true}); /*map initialized*/
        
      
  
        
        fetch('http://localhost:5000/api/v1/policestationlist')
  .then(response => response.json())
  .then(data => {
    const policeStations = data.policeStations;
    for (let i = 0; i < policeStations.length; i++) {
  const station = policeStations[i];
  console.log(station.name, station.lat, station.long);
  const marker= L.marker([station.lat,  station.long]).addTo(map);
  marker.bindPopup(`<a href="http://127.0.0.1:5500/frontend/data.html?name=${station.name}">${station.name}</a>`); 
}
  })
  .catch(error => {
    console.error('Error:', error); 
  });
         </script>
	</body>
</html>
